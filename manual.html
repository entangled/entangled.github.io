<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Entangled</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #eeeeee; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #aadfff; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #aaffdf; font-weight: bold; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #aaffdf; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #aaccef; font-weight: bold; } /* Keyword */
code span.op { color: #cceeff; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #aaffdf; font-style: italic; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
  </style>
  <!-- Bootstrap 4.5.0 stylesheet -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <link rel="stylesheet" href="css/nlesc.css" />
  <link rel="stylesheet" href="css/code-examples.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
<!-- <script data-main="scripts/main" src="js/require.js"></script> -->
  <!-- Load React. -->
  <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
<!--  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script> -->


</head>
<body class="d-flex flex-column">

<nav id="TOC" class="navbar navbar-light">
<a href="#" class="navbar-brand">Entangled</a>
<div class="navbar-nav mr-auto w-50">
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#command-line" id="toc-command-line">Command-line</a></li>
<li><a href="#standard-syntax" id="toc-standard-syntax">Standard
syntax</a></li>
<li><a href="#tangle-rules" id="toc-tangle-rules">Tangle rules</a></li>
</ul>
</div>
<span id="logobar">
<a href="https://github.com/entangled/entangled.py/"><img src="img/github.png" alt="Octocat" style="height: 20pt"/> Github</a>
<a href="https://github.com/entangled/entangled.py/releases"><img src="img/download.svg" alt="Download" style="height: 20pt"/> Downloads</a>
</span>
</nav>

<div id="title-bar">
<div id="title">
Entangled
</div>
<div id="subtitle">
the manual
</div>
</div>

<main role="main" class="flex-fill"><div class="container my-5">
<h1 id="introduction">Introduction</h1>
<p>Entangled helps you write Literate Programs in Markdown. You put all
your code inside Markdown code blocks. Entangled automatically extracts
the code and writes it to more traditional source files. You can then
edit these generated files, and the changes are being fed back to the
Markdown.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash eval"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">entangled</span> <span class="at">--version</span></span></code></pre></div>
</div>
<div class="doctestResult">
<div class="sourceCode" id="cb2"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Entangled 2.0.0b6</span></code></pre></div>
</div>
</div>
<p>We refer to the Markdown files as ‘source’ and the traditional source
code as ‘targets’. Just to keep thigs confusing ;).</p>
<h1 id="command-line">Command-line</h1>
<p>The entangled command-line tool has several sub-commands.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash eval"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">entangled</span> <span class="at">--help</span></span></code></pre></div>
</div>
<div class="doctestResult">
<div class="sourceCode" id="cb4"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>usage: entangled [-h] [-d] [-v] {tangle,stitch,sync,watch,status} ...</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>positional arguments:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  {tangle,stitch,sync,watch,status}</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    tangle              Tangle codes from Markdown</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    stitch              Stitch code changes back into the Markdown</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    sync                Be smart wether to tangle or stich</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    watch               Keep a loop running, watching for changes.</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    status</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>options:</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  -h, --help            show this help message and exit</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  -d, --debug           enable debug messages</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  -v, --version         show version number</span></code></pre></div>
</div>
</div>
<p>The command you’ll be using most often is <code>watch</code>. To
understand what the watch daemon does, it is instructive to first see
what the other commands do.</p>
<h2 id="tangle">Tangle</h2>
<p>The <code>tangle</code> command extracts code blocks from the
markdown and writes them to their respective destination.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash eval"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">entangled</span> tangle <span class="at">--help</span></span></code></pre></div>
</div>
<div class="doctestResult">
<div class="sourceCode" id="cb6"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>usage: entangled tangle [-h] [-a {standard,naked,supplemented}] [--force] [-s]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>Tangle codes from Markdown</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>options:</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  -h, --help            show this help message and exit</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  -a {standard,naked,supplemented}, --annotate {standard,naked,supplemented}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                        annotation method (default: -)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  --force               force overwrite on conflict (default: False)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  -s, --show            only show, don&#39;t act (default: False)</span></code></pre></div>
</div>
</div>
<h2 id="stitch">Stitch</h2>
<p>The <code>stitch</code> command extracts from the contents of the
database any of the input markdown files. If a target file was changed
and inserted, the contents will be different from those on the file
system. The result is written to standard output.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash eval"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">entangled</span> stitch <span class="at">--help</span></span></code></pre></div>
</div>
<div class="doctestResult">
<div class="sourceCode" id="cb8"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>usage: entangled stitch [-h] [--force] [-s]</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>Stitch code changes back into the Markdown</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>options:</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  -h, --help  show this help message and exit</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  --force     force overwrite on conflict (default: False)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  -s, --show  only show, don&#39;t act (default: False)</span></code></pre></div>
</div>
</div>
<h2 id="sync">Sync</h2>
<p>The Sync command inspects all relevant files and determines if either
tangling or stitching needs to happen.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash eval"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">entangled</span> sync <span class="at">--help</span></span></code></pre></div>
</div>
<div class="doctestResult">
<div class="sourceCode" id="cb10"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>usage: entangled sync [-h]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>Be smart wether to tangle or stich</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>options:</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  -h, --help  show this help message and exit</span></code></pre></div>
</div>
</div>
<h2 id="watch">Watch</h2>
<p>This starts a loop waiting for events on your filesystem. If any of
the involved files is written to, the daemon will run the equivalent of
<code>entangled sync</code>.</p>
<div class="doctest" data-status="SUCCESS">
<div class="doctestInput">
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash eval"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">entangled</span> watch <span class="at">--help</span></span></code></pre></div>
</div>
<div class="doctestResult">
<div class="sourceCode" id="cb12"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>usage: entangled watch [-h]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>Keep a loop running, watching for changes.</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>options:</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  -h, --help  show this help message and exit</span></code></pre></div>
</div>
</div>
<h1 id="standard-syntax">Standard syntax</h1>
<p>The standard syntax is aimed to work well together with Pandoc. Every
code block is delimited with three back ticks. Added to the opening line
is a sequence of space separated <strong>code properties</strong>. These
properties align with the CSS attributes that would end up in the
generated HTML. For those unfamiliar with CSS:</p>
<ul>
<li><code>#identifier</code>; a name prefixed with a <code>#</code>
(sharp), identifies the object, only one of these should be present per
item</li>
<li><code>.class</code>; a name prefixed with <code>.</code> (period),
assigns the object to a class, a object can belong to any number of
classes</li>
<li><code>key=value</code>; a name suffixed with <code>=</code>
(equals), optionally followed by a value, adds any meta-data attribute
to the object</li>
</ul>
<p>The complete syntax of a code block then looks like:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a> <span class="in">``` {[#&lt;reference&gt;|.&lt;language&gt;|&lt;key&gt;=&lt;value&gt;] ...}</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="in"> &lt;code&gt; ...</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="in"> ```</span></span></code></pre></div>
<p>The first class in the code properties is always interpreted to give
the <strong>programming language</strong> of the code block. In
Entangled, any code block is one of the following:</p>
<ul>
<li><p>A <strong>referable</strong> block: has exactly one
<strong>reference id</strong> (<code>#&lt;reference&gt;</code>) and a
class giving the language of the code block
(<code>.&lt;language&gt;</code>). Example:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.rust #hello-rust}</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="in">println!(&quot;Hello, Rust!&quot;);</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>In some cases you may want to have additional classes to trigger
hooks or a specific filter. Always the first class is interpreted to
identify the language.</p></li>
<li><p>A <strong>file</strong> block: has a key-value pair giving the
path to the file (<code>file=&lt;path&gt;</code>), absolute or relative
to the directory in which <code>entangled</code> runs. Again, there
should be one class giving the language of the block
(<code>.&lt;language&gt;</code>). Example:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.rust file=src/main.rs}</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="in">fn main() {</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="in">   &lt;&lt;hello-rust&gt;&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>The identifier in a file block is optional. If it is left out, the
identifier will silently be taken to be the file name.</p></li>
<li><p>An <strong>ignored</strong> block: anything not matching the
previous two.</p></li>
</ul>
<h1 id="tangle-rules">Tangle rules</h1>
<p>Entangled recognizes three parameters for every code block. Since
version 1.2 the way these parameters are extracted from an opening line
may be <a href="#custom-syntax">configured using regular
expressions</a>. Formally, every code block has three properties:</p>
<ul>
<li><code>Language</code></li>
<li><code>Identifier</code></li>
<li><code>Optional Filename</code></li>
</ul>
<p>Entangled should tangle your code following these rules:</p>
<ol type="1">
<li><p>If an <strong>identifier</strong> is repeated the contents of the
code blocks is concatenated in the order that they appear in the
Markdown. If an identifier appears in multiple files, the order is
dependent on the order by which the files appear in the configuration,
or if they result from a glob-pattern expansion, alphabetical
order.</p></li>
<li><p><strong>Noweb references</strong> are <strong>expanded</strong>.
A noweb reference in Entangled should occupy a single line of code by
itself, and is enclosed with double angle brackets, and maybe indented
with white space. Space at the end of the line is ignored.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>+--- indentation ---+--- reference  ---+--- possible space ---+</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                    &lt;&lt;noweb-reference&gt;&gt;</span></code></pre></div>
<p>The reference is expanded recursively, after which the indentation is
prefixed to every line in the expanded reference content.</p></li>
<li><p><strong>Annotation</strong>; Expanded and concatenated code
blocks are annotated using comment lines. These lines should not be
touched when editing the generated files. The default method of
annotation follows an opening comment with
<code>~\~ begin &lt;&lt;filename#identifier&gt;&gt;[n]</code>, and a
closing comment with <code>~\~ end</code>. For example</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode rust"><code class="sourceCode rust"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ~\~ begin &lt;&lt;lit/index.md|main&gt;&gt;[1]</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;hello&quot;</span>)<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ~\~ end</span></span></code></pre></div>
<!-- These comments can be configured to also include line numbers (see [annotation config](#annotation-config)). --></li>
</ol>
</div></main>

<footer class="py-4 footer"><div class="container">
<a href="https://esciencecenter.nl/"><img src="img/escience_white.png"
style="height: 20pt" /></a>
</div></footer>


<!-- Bootstrap 4.5.0 -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

<!-- Mathjax -->
</body>
</html>
